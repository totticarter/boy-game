# 几何图形覆盖面积动态展示页面设计

## 功能概述

在网页上实现一个交互式几何图形覆盖面积演示页面。页面展示一个直角三角形从左向右移动,逐渐覆盖长方形的过程,用户通过拖动时间滑块控制动画进度,实时查看不同时刻的覆盖面积变化,并通过坐标图表展示覆盖面积随时间的变化曲线。

## 核心需求

### 图形展示需求

**直角三角形**
- 初始位置在左侧,完全不覆盖长方形
- 移动方向为从左向右水平移动
- 移动速度为每秒2厘米
- 直角位置和朝向需确保能够完整覆盖长方形

**长方形**
- 固定位置,不移动
- 位于直角三角形的右侧

**两平行线**
- 直角三角形和长方形均位于两条平行线之间
- 平行线用于约束图形的垂直范围

### 动画控制需求

**时间滑块控制**
- 用户通过拖动滑块控制时间进度
- 滑块拖动时,三角形位置实时更新
- 图形展示区域同步显示当前时刻的覆盖状态

**时间范围**
- 横轴时间单位为秒
- 时间从0秒开始,直到三角形完全覆盖长方形并移出覆盖区域
- 时间范围根据三角形移动速度(2厘米/秒)和图形尺寸自动计算

### 面积展示需求

**覆盖面积计算**
- 实时计算直角三角形与长方形重叠部分的面积
- 面积单位为平方厘米
- 覆盖面积随时间变化呈现特定的数学规律

**坐标图表展示**
- 横轴:时间(秒)
- 纵轴:覆盖面积(平方厘米)
- 绘制覆盖面积随时间变化的曲线
- 在图表上标注当前时刻的位置点

## 页面布局结构

### 整体布局

页面采用垂直分栏布局,分为以下区域:

| 区域 | 位置 | 功能 |
|------|------|------|
| 图形演示区 | 上半部分 | 展示直角三角形、长方形、平行线及覆盖状态 |
| 控制区 | 中间部分 | 时间滑块和当前状态信息 |
| 图表展示区 | 下半部分 | 展示覆盖面积-时间坐标图 |

### 图形演示区

**画布要求**
- 使用Canvas画布渲染图形
- 画布尺寸需足够展示完整的移动过程
- 背景为浅色,图形使用对比鲜明的颜色

**图形绘制要素**
- 两条平行线:浅灰色虚线,标识图形的垂直边界
- 长方形:固定位置,填充颜色为蓝色,带边框
- 直角三角形:填充颜色为红色,带边框,位置随时间变化
- 覆盖区域:使用半透明紫色高亮显示重叠部分

**尺寸比例**
- 1厘米在画布上对应的像素数需保持一致
- 图形尺寸由系统自动计算,确保:
  - 三角形能够完整覆盖长方形
  - 覆盖过程清晰可见
  - 覆盖面积变化曲线呈现明显的数学特征

### 控制区

**时间滑块**
- 横向滑块,宽度占满容器
- 滑块范围对应完整的时间跨度(从0秒到完全移出)
- 滑块上方显示当前时间刻度标记

**状态信息显示**
- 当前时间:显示当前滑块对应的时间值(精确到小数点后1位)
- 三角形位置:显示三角形中心或关键点的X坐标(厘米)
- 当前覆盖面积:显示当前时刻的覆盖面积(平方厘米,精确到小数点后2位)

### 图表展示区

**坐标系**
- 横轴:时间轴,标注刻度和单位(秒)
- 纵轴:面积轴,标注刻度和单位(平方厘米)
- 网格线:辅助阅读的浅色网格

**曲线绘制**
- 绘制覆盖面积随时间变化的完整曲线
- 曲线颜色为深绿色,线宽适中
- 在当前时刻位置绘制高亮标记点

**图例说明**
- 标注横轴和纵轴的含义和单位
- 说明曲线表示的数据关系

## 交互行为

### 滑块拖动交互

**触发条件**
- 用户按下鼠标并拖动时间滑块
- 用户点击滑块轨道直接跳转到指定时间

**响应行为**
1. 根据滑块位置计算当前时间值
2. 根据时间值和移动速度计算三角形位置
3. 重新绘制图形演示区的所有元素
4. 计算并更新当前覆盖面积
5. 更新状态信息显示
6. 在图表上移动当前时刻标记点

**性能要求**
- 拖动过程中画面更新流畅,无明显卡顿
- 计算和绘制响应延迟小于50毫秒

### 初始加载行为

**页面加载完成后**
1. 计算图形的合适尺寸和位置
2. 预计算整个时间范围内的覆盖面积数据
3. 绘制完整的面积-时间曲线
4. 将滑块设置为初始位置(时间=0秒)
5. 绘制初始状态的图形(三角形未覆盖长方形)

## 数据计算逻辑

### 三角形位置计算

**输入参数**
- 当前时间 t(秒)
- 移动速度 v = 2厘米/秒
- 初始位置 x0(厘米)

**计算公式**
- 当前位置 x(t) = x0 + v × t

### 覆盖面积计算

**计算步骤**
1. 获取三角形当前位置的顶点坐标
2. 获取长方形的固定顶点坐标
3. 判断两个图形是否存在重叠
4. 如果重叠,计算重叠多边形的顶点
5. 根据重叠多边形的顶点计算面积

**几何关系**
- 直角三角形与长方形的相交区域可能是三角形或四边形
- 需要根据三角形斜边与长方形的相交情况分类讨论
- 面积计算使用多边形顶点坐标的叉乘求和方法

**边界条件**
- 当三角形完全在长方形左侧时,覆盖面积为0
- 当三角形完全在长方形右侧时,覆盖面积为0
- 覆盖面积最大值不超过长方形面积

### 图形尺寸自动计算

**约束条件**
- 三角形和长方形都位于两平行线之间
- 三角形能够完整覆盖长方形
- 覆盖过程的时间跨度合理(建议5-15秒)
- 覆盖面积曲线特征明显

**推荐参数**
| 参数 | 建议值 | 说明 |
|------|--------|------|
| 平行线间距 | 10厘米 | 图形的高度限制 |
| 长方形宽度 | 8厘米 | 长方形的水平尺寸 |
| 长方形高度 | 6厘米 | 长方形的垂直尺寸,小于平行线间距 |
| 三角形直角边1 | 10厘米 | 竖直方向的直角边,等于平行线间距 |
| 三角形直角边2 | 12厘米 | 水平方向的直角边,大于长方形宽度 |
| 初始间距 | 2厘米 | 三角形初始位置与长方形左边缘的距离 |

**时间范围计算**
- 总移动距离 = 初始间距 + 长方形宽度 + 三角形水平直角边
- 总时间 = 总移动距离 / 移动速度

## 渲染技术选型

### Canvas渲染

**选择理由**
- 需要频繁重绘图形和面积高亮
- 需要精确控制几何图形的绘制
- 性能优于DOM操作方式

**渲染要素**

*图形演示Canvas*
- 绘制平行线、长方形、三角形
- 使用路径填充实现覆盖区域高亮
- 使用变换矩阵实现三角形平移

*图表Canvas*
- 绘制坐标轴和刻度
- 绘制网格线
- 绘制面积-时间曲线
- 绘制当前时刻标记点

### 样式规范

**颜色方案**
| 元素 | 颜色 | 透明度 |
|------|------|--------|
| 平行线 | 浅灰色 #CCCCCC | 100% |
| 长方形填充 | 蓝色 #4A90E2 | 80% |
| 长方形边框 | 深蓝色 #2E5C8A | 100% |
| 三角形填充 | 红色 #E74C3C | 80% |
| 三角形边框 | 深红色 #C0392B | 100% |
| 覆盖区域 | 紫色 #9B59B6 | 60% |
| 曲线 | 深绿色 #27AE60 | 100% |
| 当前点标记 | 橙色 #F39C12 | 100% |

**字体规范**
- 状态信息:14px,无衬线字体,深灰色
- 坐标轴标签:12px,无衬线字体,黑色
- 数值标注:13px,等宽字体,深灰色

## 响应式设计

### 画布尺寸适配

**适配策略**
- 画布宽度占满容器,最小宽度600px
- 画布高度根据内容需求设定,图形演示区高度约400px,图表区高度约300px
- 在不同屏幕尺寸下保持厘米到像素的比例一致

**缩放处理**
- 小屏幕设备上可以适当缩放整个页面
- 保持图形的长宽比例不变
- 文字和标注大小同步缩放

### 移动设备考虑

**触摸交互**
- 滑块支持触摸拖动
- 增大滑块的触摸热区

**布局调整**
- 小屏幕下可以隐藏部分辅助信息
- 图表区域可以支持横向滚动查看完整范围

## 扩展性考虑

### 参数可配置化

未来可以支持用户自定义参数:
- 三角形和长方形的尺寸
- 三角形的移动速度
- 图形的颜色主题
- 时间范围和步进精度

### 功能增强方向

- 支持播放/暂停自动播放动画
- 支持导出面积-时间数据为CSV
- 支持截图保存当前状态
- 显示覆盖面积的数学公式
- 支持多种图形组合的覆盖演示

## 技术实现边界

本设计文档定义页面的功能、布局、交互和数据计算的抽象逻辑,不涉及具体的实现细节:
- 具体使用原生JavaScript、框架或库由实现者决定
- Canvas绘制API的具体调用由实现者实现
- 数学公式的编程实现由实现者完成
- HTML结构和CSS样式的具体编写由实现者完成
