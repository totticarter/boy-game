<view class="game-container">
  <view class="info-panel">
    <view class="player-info">
      <text class="info-label">ç©å®¶1</text>
      <text class="info-value">åˆ†æ•°: {{score}}</text>
      <text class="info-value">é•¿åº¦: {{length}}</text>
    </view>

    <view class="timer">
      <text class="timer-icon">â±ï¸</text>
      <text class="timer-value" style="color: {{timeLeft <= 10 ? '#ff6b6b' : '#667eea'}}">{{timerText}}</text>
    </view>

    <view class="player-info player2" wx:if="{{gameMode === 'double'}}">
      <text class="info-label">ç©å®¶2</text>
      <text class="info-value">åˆ†æ•°: {{score2}}</text>
      <text class="info-value">é•¿åº¦: {{length2}}</text>
    </view>
  </view>

  <canvas 
    type="2d"
    id="gameCanvas"
    class="game-canvas"
    disable-scroll="{{true}}"
  ></canvas>

  <view class="controls">
    <text class="control-text">{{controlText}}</text>
    <text class="control-hint">ğŸŸ¢ å°è™«å­: +1èŠ‚ | ğŸ”´ å¤§è™«å­: +2èŠ‚ | ğŸŸ£ ç´«è‰²æœå®: +3èŠ‚</text>
  </view>

  <view class="button-panel">
    <button class="game-button" bindtap="startGame" disabled="{{gameStarted}}">
      {{gameStarted ? 'â–¶ å·²å¼€å§‹' : 'â–¶ å¼€å§‹'}}
    </button>
    <button class="game-button pause" bindtap="togglePause" disabled="{{!gameStarted}}">
      {{gamePaused ? 'â–¶ ç»§ç»­' : 'â¸ æš‚åœ'}}
    </button>
    <button class="game-button restart" bindtap="restartGame">
      ğŸ”„ é‡å¯
    </button>
  </view>

  <!-- æ¸¸æˆç»“æŸå¼¹çª— -->
  <view class="game-over-mask" wx:if="{{showGameOver}}" catchtap="hideGameOver">
    <view class="game-over" catchtap="stopPropagation">
      <text class="game-over-title">æ¸¸æˆç»“æŸ!</text>
      <text class="winner-text" style="color: {{winnerColor}}">{{winnerText}}</text>
      <text class="final-score">{{finalScoreText}}</text>
      <text class="final-length">{{finalLengthText}}</text>
      <button class="restart-button" bindtap="restartGame">é‡æ–°å¼€å§‹</button>
      <button class="back-button" bindtap="backToHome">è¿”å›é¦–é¡µ</button>
    </view>
  </view>

  <!-- åŒäººæ¨¡å¼æ§åˆ¶å™¨ -->
  <view class="joystick-container" wx:if="{{gameMode === 'double'}}">
    <view class="joystick left">
      <text class="joystick-label">ç©å®¶1</text>
      <view class="joystick-buttons">
        <button class="joy-btn" bindtap="player1Up">â†‘</button>
        <view class="joy-row">
          <button class="joy-btn" bindtap="player1Left">â†</button>
          <button class="joy-btn" bindtap="player1Down">â†“</button>
          <button class="joy-btn" bindtap="player1Right">â†’</button>
        </view>
      </view>
    </view>

    <view class="joystick right">
      <text class="joystick-label">ç©å®¶2</text>
      <view class="joystick-buttons">
        <button class="joy-btn" bindtap="player2Up">W</button>
        <view class="joy-row">
          <button class="joy-btn" bindtap="player2Left">A</button>
          <button class="joy-btn" bindtap="player2Down">S</button>
          <button class="joy-btn" bindtap="player2Right">D</button>
        </view>
      </view>
    </view>
  </view>

  <!-- å•äººæ¨¡å¼æ§åˆ¶å™¨ -->
  <view class="joystick-container single" wx:else>
    <view class="joystick center">
      <view class="joystick-buttons">
        <button class="joy-btn" bindtap="player1Up">â†‘</button>
        <view class="joy-row">
          <button class="joy-btn" bindtap="player1Left">â†</button>
          <button class="joy-btn" bindtap="player1Down">â†“</button>
          <button class="joy-btn" bindtap="player1Right">â†’</button>
        </view>
      </view>
    </view>
  </view>
</view>
